#!/usr/bin/env node
const path = require('path')
const fs = require('fs').promises

const rootPath = path.resolve(__dirname, '../')
const packagePath = path.resolve(process.cwd(), './package.json')
const package = require(packagePath)
const paths = process.argv.slice(2)

const source = `// THIS FILE IS AUTOGENERATED, EDIT WITH CAUTION
export const version = '${package.version}'
export const moduleName = '${package.name}'
`

console.log(`Using package: ${path.relative(rootPath, packagePath)}`)

paths.forEach(async outputPath => {
  await fs.writeFile(outputPath, source)
  console.log(`Wrote: ${path.relative(rootPath, outputPath)}`)
})
