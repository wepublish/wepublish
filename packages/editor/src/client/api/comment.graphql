fragment FullParentComment on Comment {
  id
  state
  rejectionReason
  user {
    ...FullUser
  }
  guestUsername
  revisions {
    text
    createdAt
  }
  createdAt
  modifiedAt
}

fragment FullComment on Comment {
  id

  state
  rejectionReason
  guestUsername
  user {
    ...FullUser
  }

  revisions {
    text
    createdAt
  }

  createdAt
  modifiedAt

  parentComment {
    ...FullParentComment
  }

  tags {
    id
    tag
  }
}

query CommentList(
  $filter: CommentFilter
  $cursor: ID
  $take: Int
  $skip: Int
  $order: SortOrder
  $sort: CommentSort
) {
  comments(filter: $filter, cursor: $cursor, take: $take, skip: $skip, order: $order, sort: $sort) {
    nodes {
      ...FullComment
    }

    pageInfo {
      startCursor
      endCursor
      hasNextPage
      hasPreviousPage
    }

    totalCount
  }
}

query Comment($id: ID!) {
  comment(id: $id) {
    ...FullComment
  }
}

mutation ApproveComment($id: ID!) {
  approveComment(id: $id) {
    state
  }
}

mutation RejectComment($id: ID!, $rejectionReason: CommentRejectionReason!) {
  rejectComment(id: $id, rejectionReason: $rejectionReason) {
    state
    rejectionReason
  }
}

mutation RequestChangesOnComment($id: ID!, $rejectionReason: CommentRejectionReason!) {
  requestChangesOnComment(id: $id, rejectionReason: $rejectionReason) {
    state
    rejectionReason
  }
}

mutation updateComment($id: ID!, $text: RichText, $tagIds: [ID!]) {
  updateComment(id: $id, text: $text, tagIds: $tagIds) {
    ...FullComment
  }
}

mutation createComment($itemID: ID!, $itemType: CommentItemType!, $text: RichText, $tagIds: [ID!]) {
  createComment(itemID: $itemID, itemType: $itemType, text: $text, tagIds: $tagIds) {
    id
  }
}
