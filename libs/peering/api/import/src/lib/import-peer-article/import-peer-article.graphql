fragment FullImage on Image {
  url
  license
  source
}

fragment FullArticle on Article {
  id
}

fragment FullPage on Page {
  id
}

fragment FullEvent on Event {
  id
}

fragment FullPoll on FullPoll {
  id
}

fragment CommentBlockComment on Comment {
  id
}

fragment PeerWithProfile on Peer {
  id
}

fragment ArticleWithoutBlocks on Article {
  id
}

fragment PageWithoutBlocks on Page {
  id
}

fragment ImportBlock on BlockContent {
  ...FullBlock

  ... on PollBlock {
    __typename
    type
  }

  ... on HTMLBlock {
    __typename
    type
  }

  ... on EventBlock {
    __typename
    type
  }

  ... on CommentBlock {
    __typename
    type
  }

  ... on TeaserListBlock {
    __typename
    type
  }

  ... on TeaserGridBlock {
    __typename
    type
  }

  ... on TeaserGridFlexBlock {
    __typename
    type
  }
}

fragment SlimArticleRevision on ArticleRevision {
  id
  createdAt
  preTitle
  title
  lead

  image {
    ...FullImage
  }
}

fragment SlimArticle on Article {
  id
  publishedAt
  createdAt
  modifiedAt
  shared
  hidden
  slug
  url

  latest {
    ...SlimArticleRevision
  }
}

query ArticleList(
  $filter: ArticleFilter
  $take: Int
  $skip: Int
  $order: SortOrder
  $sort: ArticleSort
) {
  articles(filter: $filter, take: $take, skip: $skip, order: $order, sort: $sort) {
    nodes {
      ...SlimArticle
    }

    pageInfo {
      startCursor
      endCursor
      hasNextPage
      hasPreviousPage
    }

    totalCount
  }
}

query Article($id: String!) {
  article(id: $id) {
    id
    url

    tags {
      tag
    }

    published {
      blocks {
        ...ImportBlock
      }

      authors {
        name
        slug
        bio
        jobTitle
        image {
          url
        }
        hideOnArticle
      }
    }
  }
}
