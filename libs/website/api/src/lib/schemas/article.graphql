fragment ArticleWithoutTeasers on Article {
  id
  publishedAt
  updatedAt
  preTitle
  title
  lead
  slug
  url
  tags
  blocks {
    __typename

    ... on TitleBlock {
      title
      lead
    }

    ... on ImageBlock {
      caption
      image {
        ...FullImage
      }
    }

    ... on QuoteBlock {
      quote
      author
    }

    ... on RichTextBlock {
      richText
    }

    ... on HTMLBlock {
      html
    }
  }

  image {
    ...FullImage
  }
}

fragment FullArticle on Article {
  ...ArticleWithoutTeasers
  blocks {
    ... on TeaserGridFlexBlock {
      flexTeasers {
        alignment {
          x
          y
          w
          h
        }

        teaser {
          ... on ArticleTeaser {
            style

            image {
              ...FullImage
            }

            preTitle
            title
            lead

            article {
              ...ArticleWithoutTeasers
            }
          }

          ... on PageTeaser {
            style

            image {
              ...FullImage
            }

            preTitle
            title
            lead

            page {
              id
              title
              description
              url
              blocks {
                __typename

                ... on TitleBlock {
                  title
                  lead
                }

                ... on ImageBlock {
                  caption
                  image {
                    ...FullImage
                  }
                }
              }
            }
          }

          ... on CustomTeaser {
            style

            image {
              ...FullImage
            }

            preTitle
            title
            lead
            contentUrl
            properties {
              key
              value
            }
          }
        }
      }
    }
  }
}

query Article($slug: Slug, $id: ID) {
  article(slug: $slug, id: $id) {
    ...FullArticle
  }
}

query PeerArticle($peerSlug: Slug, $peerId: ID, $articleId: ID!) {
  peerArticle(peerSlug: $peerSlug, peerID: $peerId, id: $articleId) {
    ...FullArticle
  }
}
